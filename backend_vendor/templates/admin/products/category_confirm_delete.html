{% extends 'admin/base.html' %}

{% block title %}Delete Category - E-Commerce Admin{% endblock %}

{% block content %}
<div class="page-header">
    <h1 class="page-title">
        <i class="fas fa-trash"></i>
        Delete Category
    </h1>
</div>

<div class="data-table" style="max-width: 600px; margin: 0 auto;">
    <div class="table-header">
        <h3 class="table-title">Confirm Deletion</h3>
    </div>
    <div style="padding: 32px;">
        <div style="text-align: center; margin-bottom: 32px;">
            <i class="fas fa-exclamation-triangle fa-3x" style="color: #ef4444; margin-bottom: 16px;"></i>
            <h3 style="color: #1e293b; margin: 0 0 8px 0;">Are you sure?</h3>
            <p style="color: #64748b; margin: 0;">This action cannot be undone.</p>
        </div>

        <div style="background: #fef2f2; border: 1px solid #fecaca; border-radius: 8px; padding: 20px; margin-bottom: 24px;">
            <h4 style="color: #dc2626; margin: 0 0 8px 0;">
                <i class="fas fa-tag"></i>
                {{ object.name }}
            </h4>
            {% if object.description %}
            <p style="color: #991b1b; margin: 0 0 12px 0;">{{ object.description }}</p>
            {% endif %}
            <div style="display: flex; justify-content: space-between; align-items: center;">
                <span style="color: #991b1b; font-weight: 600;">
                    Products in this category: {{ object.products.count }}
                </span>
                {% if object.products.count > 0 %}
                <span class="badge danger">{{ object.products.count }} product{{ object.products.count|pluralize }}</span>
                {% else %}
                <span class="badge success">No products</span>
                {% endif %}
            </div>
        </div>

        {% if object.products.count > 0 %}
        <div style="background: #fef3c7; border: 1px solid #fde68a; border-radius: 8px; padding: 16px; margin-bottom: 24px;">
            <p style="color: #92400e; margin: 0; font-weight: 600;">
                <i class="fas fa-exclamation-circle"></i>
                Warning: This category has {{ object.products.count }} product{{ object.products.count|pluralize }}.
            </p>
            <p style="color: #92400e; margin: 8px 0 0 0; font-size: 14px;">
                Please move or delete the products first before deleting this category.
            </p>
        </div>
        {% endif %}

        <form method="post" style="display: flex; gap: 16px; justify-content: center;">
            {% csrf_token %}
            <a href="{% url 'products:categories' %}" class="btn btn-outline">
                <i class="fas fa-arrow-left"></i>
                Cancel
            </a>
            {% if object.products.count == 0 %}
            <button type="submit" class="btn btn-danger">
                <i class="fas fa-trash"></i>
                Yes, Delete Category
            </button>
            {% else %}
            <a href="{% url 'products:list' %}?category={{ object.id }}" class="btn btn-warning">
                <i class="fas fa-eye"></i>
                View Products First
            </a>
            {% endif %}
        </form>
    </div>
</div>
{% endblock %}