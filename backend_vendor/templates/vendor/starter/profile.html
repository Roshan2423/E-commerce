{% extends 'vendor/starter/base.html' %}

{% block title %}Profile Settings{% endblock %}

{% block content %}
<div class="profile-container">
    <h1 class="page-title">Profile Settings</h1>

    <form method="post" enctype="multipart/form-data">
        {% csrf_token %}

        <div class="profile-card">
            <h2>Business Logo</h2>
            <div class="logo-section">
                {% if business.logo %}
                <img src="{{ business.logo.url }}" alt="{{ business.business_name }}" class="current-logo" id="logo-preview-img">
                {% else %}
                <div class="logo-placeholder" id="logo-placeholder">
                    <span>No logo</span>
                </div>
                <img src="" alt="Preview" class="current-logo" id="logo-preview-img" style="display: none;">
                {% endif %}

                <div class="logo-controls">
                    <label class="btn btn-secondary">
                        Upload Logo
                        <input type="file" name="logo" id="logo-input" accept="image/*" style="display: none;">
                    </label>
                    {% if business.logo %}
                    <label class="btn btn-danger">
                        Remove
                        <input type="checkbox" name="remove_logo" value="1" style="display: none;">
                    </label>
                    {% endif %}
                </div>
                <p class="hint">Recommended: 200x200px. If you don't have a logo, your business name will be shown.</p>
            </div>
        </div>

        <div class="profile-card">
            <h2>Business Information</h2>

            <div class="form-group">
                <label>Business Name *</label>
                <input type="text" name="business_name" value="{{ business.business_name }}" required>
            </div>

            <div class="form-group">
                <label>Email</label>
                <input type="email" value="{{ business.email }}" disabled>
            </div>

            <div class="form-group">
                <label>Phone</label>
                <input type="tel" name="phone" value="{{ business.phone }}" placeholder="+977-XXXXXXXXXX">
            </div>

            <div class="form-group">
                <label>Description</label>
                <textarea name="description" rows="3" placeholder="Brief description of your business">{{ business.description }}</textarea>
            </div>

            <button type="submit" class="btn btn-primary">Save Changes</button>
        </div>
    </form>
</div>

<style>
    .profile-container {
        max-width: 600px;
        margin: 0 auto;
        padding: 20px;
    }

    .page-title {
        font-size: 24px;
        margin-bottom: 24px;
    }

    .profile-card {
        background: white;
        border-radius: 12px;
        padding: 24px;
        margin-bottom: 20px;
        box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    }

    .profile-card h2 {
        font-size: 18px;
        margin-bottom: 16px;
        padding-bottom: 12px;
        border-bottom: 1px solid #eee;
    }

    .logo-section {
        text-align: center;
    }

    .current-logo {
        width: 120px;
        height: 120px;
        object-fit: cover;
        border-radius: 12px;
        border: 2px solid #ddd;
        margin-bottom: 16px;
    }

    .logo-placeholder {
        width: 120px;
        height: 120px;
        border-radius: 12px;
        border: 2px dashed #ddd;
        display: flex;
        align-items: center;
        justify-content: center;
        color: #999;
        margin: 0 auto 16px;
    }

    .logo-controls {
        display: flex;
        gap: 12px;
        justify-content: center;
        margin-bottom: 12px;
    }

    .hint {
        font-size: 13px;
        color: #666;
    }

    .form-group {
        margin-bottom: 16px;
    }

    .form-group label {
        display: block;
        font-weight: 600;
        margin-bottom: 6px;
    }

    .form-group input,
    .form-group textarea {
        width: 100%;
        padding: 10px 12px;
        border: 1px solid #ddd;
        border-radius: 8px;
        font-size: 14px;
    }

    .form-group input:disabled {
        background: #f5f5f5;
    }

    .btn {
        padding: 10px 20px;
        border-radius: 8px;
        font-size: 14px;
        cursor: pointer;
        border: none;
    }

    .btn-primary {
        background: #10b981;
        color: white;
    }

    .btn-secondary {
        background: #f4f4f5;
        color: #333;
    }

    .btn-danger {
        background: #fee2e2;
        color: #dc2626;
    }
</style>

<script>
document.getElementById('logo-input').addEventListener('change', function() {
    if (this.files && this.files[0]) {
        const reader = new FileReader();
        reader.onload = function(e) {
            const img = document.getElementById('logo-preview-img');
            const placeholder = document.getElementById('logo-placeholder');
            img.src = e.target.result;
            img.style.display = 'block';
            if (placeholder) placeholder.style.display = 'none';
        };
        reader.readAsDataURL(this.files[0]);
    }
});
</script>
{% endblock %}
