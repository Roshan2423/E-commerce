{% extends 'vendor/starter/base.html' %}
<!-- TEMPLATE: STARTER DASHBOARD -->

{% block title %}Dashboard{% endblock %}
{% block breadcrumb %}Overview{% endblock %}

{% block content %}
<!-- Welcome Header with Logo and Business Name -->
<div class="welcome-header" style="background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%); border-radius: 16px; padding: 24px 32px; margin-bottom: 32px; display: flex; align-items: center; gap: 24px;">
    {% if business.logo %}
    <div class="welcome-logo" style="flex-shrink: 0;">
        <img src="{{ business.logo.url }}" alt="{{ business.business_name }}" style="width: 80px; height: 80px; border-radius: 16px; object-fit: cover; border: 3px solid rgba(255,255,255,0.3); box-shadow: 0 4px 12px rgba(0,0,0,0.15);">
    </div>
    {% endif %}
    <div class="welcome-info" style="flex: 1;">
        <h1 style="color: white; font-size: 24px; font-weight: 700; margin: 0 0 8px 0;">
            Welcome, {{ business.business_name }}!
        </h1>
        <p style="color: rgba(255,255,255,0.85); font-size: 14px; margin: 0;">
            Here's what's happening with your store.
        </p>
    </div>
    <div class="welcome-badge" style="flex-shrink: 0;">
        <span style="background: rgba(255,255,255,0.2); color: white; padding: 8px 16px; border-radius: 20px; font-size: 13px; font-weight: 600; display: inline-flex; align-items: center; gap: 8px;">
            <i class="fas fa-rocket"></i>Starter Plan
        </span>
    </div>
</div>

<div class="page-header">
    <h1 class="page-title">Dashboard Overview</h1>
</div>

<!-- Stats Grid -->
<div class="stats-grid">
    <div class="stat-card">
        <div class="stat-icon primary">
            <i class="fas fa-box"></i>
        </div>
        <div class="stat-content">
            <div class="stat-value">{{ total_products|default:0 }}</div>
            <div class="stat-label">Total Products</div>
        </div>
    </div>

    <div class="stat-card">
        <div class="stat-icon success">
            <i class="fas fa-shopping-bag"></i>
        </div>
        <div class="stat-content">
            <div class="stat-value">{{ total_orders|default:0 }}</div>
            <div class="stat-label">Total Orders</div>
        </div>
    </div>

    <div class="stat-card">
        <div class="stat-icon warning">
            <i class="fas fa-coins"></i>
        </div>
        <div class="stat-content">
            <div class="stat-value">Rs. {{ total_revenue|default:0|floatformat:0 }}</div>
            <div class="stat-label">Total Revenue</div>
        </div>
    </div>

    <div class="stat-card">
        <div class="stat-icon danger">
            <i class="fas fa-clock"></i>
        </div>
        <div class="stat-content">
            <div class="stat-value">{{ pending_orders|default:0 }}</div>
            <div class="stat-label">Pending Orders</div>
        </div>
    </div>
</div>

<!-- Recent Orders -->
<div class="card">
    <div class="card-header">
        <h3 class="card-title">Recent Orders</h3>
        <a href="{% url 'vendor:orders' %}" class="btn btn-outline btn-sm">View All</a>
    </div>
    <div class="table-responsive">
        <table>
            <thead>
                <tr>
                    <th>Order ID</th>
                    <th>Customer</th>
                    <th>Date</th>
                    <th>Total</th>
                    <th>Status</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody>
                {% if recent_orders %}
                {% for item in recent_orders %}
                <tr>
                    <td><strong>#{{ item.order.id }}</strong></td>
                    <td>{{ item.order.user.get_full_name|default:item.order.user.username|default:"Guest" }}</td>
                    <td>{{ item.order.created_at|date:"M d, Y" }}</td>
                    <td><strong>Rs. {{ item.total_price|floatformat:0 }}</strong></td>
                    <td>
                        {% if item.order.status == 'delivered' %}
                        <span class="badge badge-success">Delivered</span>
                        {% elif item.order.status == 'processing' %}
                        <span class="badge badge-info">Processing</span>
                        {% elif item.order.status == 'pending' %}
                        <span class="badge badge-warning">Pending</span>
                        {% elif item.order.status == 'cancelled' %}
                        <span class="badge badge-danger">Cancelled</span>
                        {% elif item.order.status == 'shipped' %}
                        <span class="badge badge-info">Shipped</span>
                        {% else %}
                        <span class="badge badge-secondary">{{ item.order.status|title }}</span>
                        {% endif %}
                    </td>
                    <td>
                        <a href="{% url 'vendor:order_detail' item.order.order_id %}" class="btn btn-outline btn-sm">
                            <i class="fas fa-eye"></i>
                        </a>
                    </td>
                </tr>
                {% endfor %}
                {% else %}
                <!-- No orders yet -->
                <tr>
                    <td colspan="6" style="text-align: center; padding: 3rem;">
                        <i class="fas fa-inbox" style="font-size: 3rem; color: var(--text-secondary); opacity: 0.5; margin-bottom: 1rem; display: block;"></i>
                        <p style="color: var(--text-secondary);">No orders yet. Start by adding products!</p>
                        <a href="{% url 'vendor:product_add' %}" class="btn btn-primary" style="margin-top: 1rem;">
                            <i class="fas fa-plus"></i> Add Your First Product
                        </a>
                    </td>
                </tr>
                {% endif %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}
