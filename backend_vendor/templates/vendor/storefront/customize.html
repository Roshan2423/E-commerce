{% extends 'vendor/base.html' %}
{% load static %}

{% block title %}Customize Storefront - {{ vendor_business.business_name }}{% endblock %}

{% block content %}
<div class="page-header">
    <div class="header-content">
        <h1 class="page-title">Customize Your Storefront</h1>
        <p class="page-subtitle">Personalize your store's appearance</p>
    </div>
    <div class="header-actions">
        <a href="/store/{{ vendor_business.slug }}/" class="btn btn-outline" target="_blank">
            <i class="fas fa-external-link-alt"></i>
            <span>Preview Store</span>
        </a>
    </div>
</div>

<form method="post" enctype="multipart/form-data" class="storefront-form">
    {% csrf_token %}

    <div class="customize-grid">
        <!-- Hero Section -->
        <div class="customize-section">
            <h3 class="section-title">
                <i class="fas fa-image"></i>
                Hero Section
            </h3>
            <div class="section-content">
                <div class="form-group">
                    <label>Hero Image</label>
                    {% if storefront.hero_image %}
                    <div class="current-image">
                        <img src="{{ storefront.hero_image.url }}" alt="Hero">
                    </div>
                    {% endif %}
                    <input type="file" name="hero_image" accept="image/*">
                    <small>Recommended: 1920x600 pixels</small>
                </div>

                <div class="form-group">
                    <label for="hero_title">Hero Title</label>
                    <input type="text" id="hero_title" name="hero_title" value="{{ storefront.hero_title|default:'' }}" placeholder="Welcome to Our Store">
                </div>

                <div class="form-group">
                    <label for="hero_subtitle">Hero Subtitle</label>
                    <input type="text" id="hero_subtitle" name="hero_subtitle" value="{{ storefront.hero_subtitle|default:'' }}" placeholder="Discover amazing products">
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="hero_cta_text">Button Text</label>
                        <input type="text" id="hero_cta_text" name="hero_cta_text" value="{{ storefront.hero_cta_text|default:'Shop Now' }}">
                    </div>
                    <div class="form-group">
                        <label for="hero_cta_link">Button Link</label>
                        <input type="text" id="hero_cta_link" name="hero_cta_link" value="{{ storefront.hero_cta_link|default:'/products' }}">
                    </div>
                </div>
            </div>
        </div>

        <!-- Branding -->
        <div class="customize-section">
            <h3 class="section-title">
                <i class="fas fa-palette"></i>
                Branding & Colors
            </h3>
            <div class="section-content">
                <div class="form-group">
                    <label>Store Logo</label>
                    {% if storefront.logo %}
                    <div class="current-image logo">
                        <img src="{{ storefront.logo.url }}" alt="Logo">
                    </div>
                    {% endif %}
                    <input type="file" name="logo" accept="image/*">
                    <small>Recommended: 200x200 pixels, transparent PNG</small>
                </div>

                <div class="color-pickers">
                    <div class="form-group">
                        <label for="primary_color">Primary Color</label>
                        <div class="color-input">
                            <input type="color" id="primary_color" name="primary_color" value="{{ storefront.primary_color|default:'#6366f1' }}">
                            <span class="color-value">{{ storefront.primary_color|default:'#6366f1' }}</span>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="secondary_color">Secondary Color</label>
                        <div class="color-input">
                            <input type="color" id="secondary_color" name="secondary_color" value="{{ storefront.secondary_color|default:'#8b5cf6' }}">
                            <span class="color-value">{{ storefront.secondary_color|default:'#8b5cf6' }}</span>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="accent_color">Accent Color</label>
                        <div class="color-input">
                            <input type="color" id="accent_color" name="accent_color" value="{{ storefront.accent_color|default:'#ec4899' }}">
                            <span class="color-value">{{ storefront.accent_color|default:'#ec4899' }}</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Layout Options -->
        <div class="customize-section">
            <h3 class="section-title">
                <i class="fas fa-th-large"></i>
                Layout Options
            </h3>
            <div class="section-content">
                <div class="form-group">
                    <label for="product_layout">Product Layout</label>
                    <select id="product_layout" name="product_layout">
                        <option value="grid" {% if storefront.product_layout == 'grid' %}selected{% endif %}>Grid</option>
                        <option value="list" {% if storefront.product_layout == 'list' %}selected{% endif %}>List</option>
                        <option value="compact" {% if storefront.product_layout == 'compact' %}selected{% endif %}>Compact Grid</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="products_per_page">Products Per Page</label>
                    <input type="number" id="products_per_page" name="products_per_page" value="{{ storefront.products_per_page|default:12 }}" min="4" max="48">
                </div>

                <div class="checkbox-group">
                    <label class="checkbox-label">
                        <input type="checkbox" name="show_flash_sale" {% if storefront.show_flash_sale %}checked{% endif %}>
                        <span>Show Flash Sale Section</span>
                    </label>
                    <label class="checkbox-label">
                        <input type="checkbox" name="show_featured" {% if storefront.show_featured %}checked{% endif %}>
                        <span>Show Featured Products</span>
                    </label>
                    <label class="checkbox-label">
                        <input type="checkbox" name="show_categories" {% if storefront.show_categories %}checked{% endif %}>
                        <span>Show Categories Navigation</span>
                    </label>
                </div>
            </div>
        </div>

        <!-- Social Links -->
        <div class="customize-section">
            <h3 class="section-title">
                <i class="fas fa-share-alt"></i>
                Social Media Links
            </h3>
            <div class="section-content">
                <div class="form-group">
                    <label for="facebook_url">
                        <i class="fab fa-facebook"></i> Facebook
                    </label>
                    <input type="url" id="facebook_url" name="facebook_url" value="{{ storefront.facebook_url|default:'' }}" placeholder="https://facebook.com/yourpage">
                </div>

                <div class="form-group">
                    <label for="instagram_url">
                        <i class="fab fa-instagram"></i> Instagram
                    </label>
                    <input type="url" id="instagram_url" name="instagram_url" value="{{ storefront.instagram_url|default:'' }}" placeholder="https://instagram.com/yourhandle">
                </div>

                <div class="form-group">
                    <label for="twitter_url">
                        <i class="fab fa-twitter"></i> Twitter
                    </label>
                    <input type="url" id="twitter_url" name="twitter_url" value="{{ storefront.twitter_url|default:'' }}" placeholder="https://twitter.com/yourhandle">
                </div>

                <div class="form-group">
                    <label for="tiktok_url">
                        <i class="fab fa-tiktok"></i> TikTok
                    </label>
                    <input type="url" id="tiktok_url" name="tiktok_url" value="{{ storefront.tiktok_url|default:'' }}" placeholder="https://tiktok.com/@yourhandle">
                </div>

                <div class="form-group">
                    <label for="youtube_url">
                        <i class="fab fa-youtube"></i> YouTube
                    </label>
                    <input type="url" id="youtube_url" name="youtube_url" value="{{ storefront.youtube_url|default:'' }}" placeholder="https://youtube.com/yourchannel">
                </div>
            </div>
        </div>

        <!-- SEO Settings -->
        <div class="customize-section full-width">
            <h3 class="section-title">
                <i class="fas fa-search"></i>
                SEO Settings
            </h3>
            <div class="section-content">
                <div class="form-group">
                    <label for="meta_title">Meta Title</label>
                    <input type="text" id="meta_title" name="meta_title" value="{{ storefront.meta_title|default:'' }}" placeholder="Your Store Name - Quality Products">
                    <small>Appears in browser tab and search results (max 60 characters)</small>
                </div>

                <div class="form-group">
                    <label for="meta_description">Meta Description</label>
                    <textarea id="meta_description" name="meta_description" rows="3" placeholder="Describe your store for search engines...">{{ storefront.meta_description|default:'' }}</textarea>
                    <small>Appears in search results (max 160 characters)</small>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="google_analytics_id">Google Analytics ID</label>
                        <input type="text" id="google_analytics_id" name="google_analytics_id" value="{{ storefront.google_analytics_id|default:'' }}" placeholder="G-XXXXXXXXXX">
                    </div>
                    <div class="form-group">
                        <label for="facebook_pixel_id">Facebook Pixel ID</label>
                        <input type="text" id="facebook_pixel_id" name="facebook_pixel_id" value="{{ storefront.facebook_pixel_id|default:'' }}" placeholder="XXXXXXXXXXXXXXXX">
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="form-actions">
        <button type="submit" class="btn btn-primary btn-lg">
            <i class="fas fa-save"></i>
            <span>Save Changes</span>
        </button>
    </div>
</form>

<style>
    .customize-grid {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 1.5rem;
    }

    @media (max-width: 1024px) {
        .customize-grid {
            grid-template-columns: 1fr;
        }
    }

    .customize-section {
        background: var(--card-bg);
        border: 1px solid var(--border);
        border-radius: 16px;
        overflow: hidden;
    }

    .customize-section.full-width {
        grid-column: 1 / -1;
    }

    .section-title {
        display: flex;
        align-items: center;
        gap: 0.75rem;
        padding: 1rem 1.5rem;
        font-size: 1rem;
        font-weight: 600;
        color: var(--text);
        border-bottom: 1px solid var(--border);
        background: var(--bg);
    }

    .section-title i {
        color: var(--text-secondary);
    }

    .section-content {
        padding: 1.5rem;
    }

    .form-row {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 1rem;
    }

    .form-group {
        margin-bottom: 1rem;
    }

    .form-group label {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        font-size: 0.875rem;
        font-weight: 500;
        color: var(--text);
        margin-bottom: 0.5rem;
    }

    .form-group input,
    .form-group select,
    .form-group textarea {
        width: 100%;
        padding: 0.75rem 1rem;
        border: 1px solid var(--border);
        border-radius: 10px;
        background: var(--bg);
        color: var(--text);
        font-size: 0.875rem;
    }

    .form-group small {
        display: block;
        margin-top: 0.25rem;
        color: var(--text-secondary);
        font-size: 0.75rem;
    }

    .current-image {
        margin-bottom: 1rem;
        border-radius: 8px;
        overflow: hidden;
        border: 1px solid var(--border);
    }

    .current-image img {
        max-width: 100%;
        height: auto;
    }

    .current-image.logo img {
        max-width: 100px;
        padding: 1rem;
    }

    .color-pickers {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 1rem;
    }

    .color-input {
        display: flex;
        align-items: center;
        gap: 0.75rem;
    }

    .color-input input[type="color"] {
        width: 50px;
        height: 40px;
        padding: 0;
        border: none;
        border-radius: 8px;
        cursor: pointer;
    }

    .color-value {
        font-family: monospace;
        font-size: 0.875rem;
        color: var(--text-secondary);
    }

    .checkbox-group {
        display: flex;
        flex-direction: column;
        gap: 0.75rem;
    }

    .checkbox-label {
        display: flex;
        align-items: center;
        gap: 0.75rem;
        cursor: pointer;
    }

    .checkbox-label input[type="checkbox"] {
        width: 1.25rem;
        height: 1.25rem;
    }

    .form-actions {
        margin-top: 2rem;
        display: flex;
        justify-content: flex-end;
    }

    .btn-lg {
        padding: 1rem 2rem;
        font-size: 1rem;
    }
</style>

<script>
    // Update color value displays
    document.querySelectorAll('input[type="color"]').forEach(input => {
        input.addEventListener('input', function() {
            this.nextElementSibling.textContent = this.value;
        });
    });
</script>
{% endblock %}
