{% extends 'admin/base.html' %}
{% load static %}

{% block title %}Delete {{ object.name }} - Confirm{% endblock %}

{% block content %}
<div class="page-header">
    <h1 class="page-title" style="color: #ef4444;">
        <i class="fas fa-exclamation-triangle"></i>
        Delete Product
    </h1>
    <p class="page-subtitle">This action cannot be undone</p>
</div>

<div class="data-table" style="max-width: 600px;">
    <div class="table-header" style="background: linear-gradient(135deg, #fef2f2, #fee2e2);">
        <h3 class="table-title" style="color: #ef4444;">
            <i class="fas fa-trash"></i>
            Confirm Deletion
        </h3>
    </div>
    <div style="padding: 32px;">
        <div style="background: #fef2f2; border: 2px solid #fecaca; border-radius: 12px; padding: 24px; margin-bottom: 24px;">
            <h4 style="color: #dc2626; margin: 0 0 12px 0;">
                <i class="fas fa-exclamation-circle"></i>
                Warning
            </h4>
            <p style="margin: 0; color: #7f1d1d;">
                You are about to permanently delete the product <strong>"{{ object.name }}"</strong>. 
                This will remove all product data, inventory records, and cannot be undone.
            </p>
        </div>

        <!-- Product Summary -->
        <div style="background: #f8fafc; border-radius: 12px; padding: 24px; margin-bottom: 24px;">
            <h5 style="margin: 0 0 16px 0; color: #1e293b;">Product to be deleted:</h5>
            <table style="width: 100%;">
                <tr>
                    <td style="padding: 8px 0; color: #64748b; width: 100px;">Name:</td>
                    <td style="padding: 8px 0;"><strong>{{ object.name }}</strong></td>
                </tr>
                <tr>
                    <td style="padding: 8px 0; color: #64748b;">SKU:</td>
                    <td style="padding: 8px 0;"><code>{{ object.sku|default:"N/A" }}</code></td>
                </tr>
                <tr>
                    <td style="padding: 8px 0; color: #64748b;">Price:</td>
                    <td style="padding: 8px 0;">${{ object.price|default:0|floatformat:2 }}</td>
                </tr>
                <tr>
                    <td style="padding: 8px 0; color: #64748b;">Stock:</td>
                    <td style="padding: 8px 0;">{{ object.stock_quantity|default:0 }} units</td>
                </tr>
                <tr>
                    <td style="padding: 8px 0; color: #64748b;">Status:</td>
                    <td style="padding: 8px 0;">
                        {% if object.is_active %}
                            <span class="badge success">Active</span>
                        {% else %}
                            <span class="badge danger">Inactive</span>
                        {% endif %}
                    </td>
                </tr>
            </table>
        </div>

        <form method="post">
            {% csrf_token %}
            <div style="display: flex; gap: 16px; justify-content: flex-end;">
                <a href="/products/{{ object.pk }}/" class="btn btn-outline">
                    <i class="fas fa-arrow-left"></i>
                    Cancel
                </a>
                <button type="submit" class="btn btn-danger">
                    <i class="fas fa-trash"></i>
                    Yes, Delete Product
                </button>
            </div>
        </form>
    </div>
</div>

<!-- Alternative Actions -->
<div class="data-table" style="margin-top: 24px; max-width: 600px;">
    <div class="table-header">
        <h3 class="table-title">
            <i class="fas fa-lightbulb"></i>
            Alternative Actions
        </h3>
    </div>
    <div style="padding: 24px;">
        <p style="color: #64748b; margin: 0 0 16px 0;">
            Instead of deleting, you might want to consider:
        </p>
        <div style="display: flex; flex-direction: column; gap: 12px;">
            <a href="/products/{{ object.pk }}/edit/" class="btn btn-warning" style="justify-content: flex-start;">
                <i class="fas fa-edit"></i>
                Edit the product instead
            </a>
            <button onclick="deactivateProduct()" class="btn btn-outline" style="justify-content: flex-start;">
                <i class="fas fa-eye-slash"></i>
                Deactivate the product (hide from customers)
            </button>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
function deactivateProduct() {
    if (confirm('Deactivate this product instead of deleting it?')) {
        // You can implement AJAX call here to deactivate
    }
}

document.querySelector('form').addEventListener('submit', function(e) {
    if (!confirm('Are you absolutely sure you want to delete "{{ object.name }}"? This cannot be undone.')) {
        e.preventDefault();
    }
});
</script>
{% endblock %}